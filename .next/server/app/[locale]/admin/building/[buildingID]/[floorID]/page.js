(()=>{var e={};e.id=696,e.ids=[696],e.modules={2725:(e,t,s)=>{Promise.resolve().then(s.bind(s,68091))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8805:(e,t,s)=>{Promise.resolve().then(s.bind(s,30660))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},14952:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},15079:(e,t,s)=>{"use strict";s.d(t,{bq:()=>p,eb:()=>m,gC:()=>u,l6:()=>o,yv:()=>c});var a=s(60687);s(43210);var r=s(51593),n=s(78272),i=s(13964),l=s(3589),d=s(4780);function o({...e}){return(0,a.jsx)(r.bL,{"data-slot":"select",...e})}function c({...e}){return(0,a.jsx)(r.WT,{"data-slot":"select-value",...e})}function p({className:e,size:t="default",children:s,...i}){return(0,a.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...i,children:[s,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function u({className:e,children:t,position:s="popper",...n}){return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[(0,a.jsx)(h,{}),(0,a.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(x,{})]})})}function m({className:e,children:t,...s}){return(0,a.jsxs)(r.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(i.A,{className:"size-4"})})}),(0,a.jsx)(r.p4,{children:t})]})}function h({className:e,...t}){return(0,a.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(l.A,{className:"size-4"})})}function x({className:e,...t}){return(0,a.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(n.A,{className:"size-4"})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30660:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\New project\\\\property-frontend\\\\src\\\\app\\\\[locale]\\\\admin\\\\building\\\\[buildingID]\\\\[floorID]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\admin\\building\\[buildingID]\\[floorID]\\page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},47825:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>o});var a=s(65239),r=s(48088),n=s(88170),i=s.n(n),l=s(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o={children:["",{children:["[locale]",{children:["admin",{children:["building",{children:["[buildingID]",{children:["[floorID]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,30660)),"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\admin\\building\\[buildingID]\\[floorID]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,64546)),"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,11434)),"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\admin\\building\\[buildingID]\\[floorID]\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/[locale]/admin/building/[buildingID]/[floorID]/page",pathname:"/[locale]/admin/building/[buildingID]/[floorID]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68091:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>X});var a=s(60687),r=s(16189),n=s(43210),i=s(8693),l=s(63503),d=s(29523),o=s(47033),c=s(14952);let p=({currentPage:e,totalPages:t,onPageChange:s})=>(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-6",children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>s(e-1),disabled:e<=1,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})}),(()=>{let s=[];s.push(1);for(let a=Math.max(2,e-1);a<=Math.min(t-1,e+1);a++)s[s.length-1]!==a-1&&s.push(-1),s.push(a);return t>1&&(s[s.length-1]!==t-1&&s.push(-1),s.push(t)),s})().map((t,r)=>-1===t?(0,a.jsx)("span",{className:"px-2",children:"..."},`ellipsis-${r}`):(0,a.jsx)(d.$,{variant:e===t?"default":"outline",size:"sm",onClick:()=>s(t),children:t},`page-${t}`)),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>s(e+1),disabled:e>=t,children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]});var u=s(54050),m=s(89667),h=s(11610);let x={getList:async(e,t,s=1,a=20)=>(await h.S.get(`/apartments/${e}/${t}?page=${s}&limit=${a}`)).data,updateSharedProperties:async e=>(await h.S.put("/update_shared_properties",e,{headers:{"Content-Type":"multipart/form-data"}})).data,generateApartments:async e=>(await h.S.post("/add_apartments",e)).data,updateApartmentStatus:async e=>{let t={...e,floor_plan_id:String(e.floor_plan_id),flat_number:String(e.flat_number)},s=await fetch("https://api.aisigroup.ge/api/api/update_apartment_status",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error((await s.json()).message||"Failed to update apartment");return s.json()}},g=({buildingId:e,floorPlanId:t,floorPlanName:s,onSuccess:r})=>{let[l,o]=(0,n.useState)(s||""),[c,p]=(0,n.useState)(null),h=(0,i.jE)(),g=(0,u.n)({mutationFn:e=>x.generateApartments(e),onSuccess:()=>{h.invalidateQueries({queryKey:["apartments",e,t]}),r&&r()},onError:e=>{p(e.response?.data?.message||e.response?.data?.error||"An error occurred while generating apartments."),console.error("Error generating apartments:",e)}});return(0,a.jsxs)("div",{className:"space-y-4",children:[c&&(0,a.jsx)("div",{className:"text-red-500",children:c}),g.isSuccess&&(0,a.jsx)("div",{className:"text-green-500",children:"Apartments generated successfully!"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Apartments Name"}),(0,a.jsx)(m.p,{id:"name",value:l,onChange:e=>o(e.target.value),placeholder:"Enter apartments name",disabled:g.isPending})]}),(0,a.jsx)(d.$,{onClick:()=>{if(!l.trim()){p("Name is required");return}p(null),g.mutate({building_id:e,name:l,floor_plan_id:t})},disabled:g.isPending||!l.trim(),className:"w-full",children:g.isPending?"Generating...":"Generate Apartments"})]})};var f=s(29494);let j=(e,t,s,a)=>(0,f.I)({queryKey:["apartments",e,t,s,a],queryFn:async()=>{if(!e||!t)return{apartments:[],pagination:{total:0,page:1,limit:a,totalPages:1,hasNextPage:!1,hasPreviousPage:!1}};try{return await x.getList(e,t,s,a)}catch(e){if(e.response?.data?.error==="NO_APARTMENTS_FOUND")return{apartments:[],pagination:{total:0,page:1,limit:a,totalPages:1,hasNextPage:!1,hasPreviousPage:!1}};throw e}},staleTime:3e5,gcTime:18e5,retry:2,enabled:!!e&&!!t});var v=s(96474);let b=({onGenerate:e})=>(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)(d.$,{onClick:e,className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),"Generate Apartments"]})});var y=s(62688);let N=(0,y.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),P=({apartment:e,isOpen:t,onClose:s,floorId:r,onSuccess:i})=>{let[o,c]=(0,n.useState)(e.square_meters.toString()),[p,h]=(0,n.useState)(e.mobile_paths||""),[g,f]=(0,n.useState)(e.desktop_paths||""),[j,v]=(0,n.useState)(null),[b,y]=(0,n.useState)(null),[P,_]=(0,n.useState)(null),w=(0,u.n)({mutationFn:e=>x.updateSharedProperties(e),onSuccess:()=>{_("Apartment updated successfully!"),i(),q()},onError:e=>{console.error("Error response:",e.response?.data),y(e.response?.data?.message||e.response?.data?.error||"An error occurred while updating the apartment.")}}),q=()=>{w.isPending||(y(null),_(null),s())},S=async()=>{if(void 0===e.flat_id){console.error("Missing critical apartment data:",e),y("Missing apartment data. Please try again.");return}if(!o){y("Square meters is required.");return}y(null),_(null);let t=new FormData;if(t.append("floor_plan_id",r.toString()),t.append("flat_id",e.flat_id.toString()),t.append("square_meters",o),t.append("mobile_paths",p),t.append("desktop_paths",g),j)for(let e=0;e<j.length;e++)t.append("images",j[e]);w.mutate(t)};return(0,a.jsx)(l.lG,{open:t,onOpenChange:q,children:(0,a.jsxs)(l.Cf,{className:"sm:max-w-md",children:[(0,a.jsx)(l.c7,{children:(0,a.jsx)(l.L3,{children:"Update Apartment"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[b&&(0,a.jsx)("div",{className:"text-red-500",children:b}),P&&(0,a.jsx)("div",{className:"text-green-500",children:P}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"squareMeters",children:"Square Meters"}),(0,a.jsx)(m.p,{id:"squareMeters",type:"number",value:o,onChange:e=>c(e.target.value),disabled:w.isPending})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"mobilePaths",children:"Mobile Paths"}),(0,a.jsx)(m.p,{id:"mobilePaths",type:"text",value:p,onChange:e=>h(e.target.value),disabled:w.isPending,placeholder:"Enter mobile paths"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"desktopPaths",children:"Desktop Paths"}),(0,a.jsx)(m.p,{id:"desktopPaths",type:"text",value:g,onChange:e=>f(e.target.value),disabled:w.isPending,placeholder:"Enter desktop paths"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"images",children:"Images"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.p,{id:"images",type:"file",multiple:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&v(e.target.files)},disabled:w.isPending,className:"hidden"}),(0,a.jsxs)(d.$,{type:"button",variant:"outline",onClick:()=>document.getElementById("images")?.click(),disabled:w.isPending,children:[(0,a.jsx)(N,{className:"mr-2 h-4 w-4"}),"Select Images"]}),j&&(0,a.jsxs)("span",{children:[j.length," files selected"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:q,disabled:w.isPending,children:"Cancel"}),(0,a.jsx)(d.$,{type:"button",onClick:S,disabled:w.isPending,children:w.isPending?"Updating...":"Update"})]})]})]})})};var _=s(43125);let w=(0,y.A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),q=(0,y.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var S=s(37360);let A=(0,y.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var C=s(15079);let k=["available","sold","reserved"],I=({apartment:e,isOpen:t,onClose:s,buildingId:r,floorId:o})=>{let[c,p]=(0,n.useState)(e.status||"available"),[h,g]=(0,n.useState)(e.sqm_price||0),[f,j]=(0,n.useState)(null),[v,b]=(0,n.useState)(null),y=(0,i.jE)(),N=(0,u.n)({mutationFn:e=>x.updateApartmentStatus(e),onSuccess:()=>{b("Apartment updated successfully!"),setTimeout(()=>{y.invalidateQueries({queryKey:["apartments",r,o]}),s()},200)},onError:e=>{console.error("Error updating apartment:",e),j(e.message||"An error occurred while updating the apartment.")}});return(0,a.jsx)(l.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(l.Cf,{className:"sm:max-w-md",children:[(0,a.jsx)(l.c7,{children:(0,a.jsx)(l.L3,{children:"Update Apartment"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[f&&(0,a.jsx)("div",{className:"text-red-500",children:f}),v&&(0,a.jsx)("div",{className:"text-green-500",children:v}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"apartmentStatus",className:"text-sm font-medium",children:"Apartment Status"}),(0,a.jsxs)(C.l6,{value:c,onValueChange:e=>p(e),disabled:N.isPending,children:[(0,a.jsx)(C.bq,{className:"w-full",children:(0,a.jsx)(C.yv,{placeholder:"Select status"})}),(0,a.jsx)(C.gC,{children:k.map(e=>(0,a.jsx)(C.eb,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"sqmPrice",className:"text-sm font-medium",children:"Price per m\xb2"}),(0,a.jsx)(m.p,{id:"sqmPrice",type:"number",min:"0",step:"0.01",value:h,onChange:e=>{g(parseFloat(e.target.value))},placeholder:"Enter price per square meter",disabled:N.isPending})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:s,disabled:N.isPending,children:"Cancel"}),(0,a.jsx)(d.$,{onClick:()=>{if(j(null),isNaN(h)||h<0){j("Square meter price must be a valid non-negative number");return}N.mutate({status:c,floor_plan_id:String(o),flat_number:String(e.flat_number),sqm_price:Number(h)})},disabled:N.isPending,children:N.isPending?"Updating...":"Update"})]})]})]})})};var z=s(30474);let D=({apartment:e,onUpdate:t,buildingId:s,floorId:r})=>{let[i,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),p=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e);return(0,a.jsxs)("div",{className:"p-4 border rounded shadow relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("h4",{className:"font-semibold",children:["# ",e.flat_number]}),(0,a.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"sold":return"bg-red-100 text-red-800";case"reserved":return"bg-blue-100 text-blue-800";case"under_construction":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status?.charAt(0).toUpperCase()+e.status?.slice(1).replace("_"," ")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>{l(!0)},disabled:o,className:"h-7 px-2 flex items-center",children:[o?(0,a.jsx)(_.A,{className:"w-3.5 h-3.5 mr-1 animate-spin"}):(0,a.jsx)(w,{className:"w-3.5 h-3.5 mr-1"}),(0,a.jsx)("span",{className:"text-xs",children:o?"Updating...":"Update"})]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",className:"h-7",onClick:()=>{c(!0),t(),setTimeout(()=>{c(!1)},500)},disabled:o,children:o?(0,a.jsx)(_.A,{className:"w-3.5 h-3.5 animate-spin"}):(0,a.jsx)(q,{className:"w-3.5 h-3.5"})})]})]}),e.images&&Array.isArray(e.images)&&e.images.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2  gap-2 mb-3",children:e.images.map((t,s)=>(0,a.jsx)(z.default,{width:600,height:600,src:`https://api.aisigroup.ge/api${t}`,alt:`Apartment ${e.flat_number} - Image ${s+1}`,className:"w-full h-40 object-cover rounded"},s))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-1 mb-3 justify-center",children:[(0,a.jsxs)("p",{className:"flex items-center gap-1",children:[(0,a.jsx)(S.A,{className:"h-3.5 w-3.5 mr-2 text-indigo-400"}),(0,a.jsx)("span",{className:"font-semibold",children:"Square Meters: "}),(0,a.jsxs)("span",{children:[" ",e.square_meters," m\xb2"]})]}),e.sqm_price&&e.sqm_price>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"flex items-center  gap-1",children:[(0,a.jsx)(S.A,{className:"h-3.5 w-3.5 mr-2 text-indigo-400"}),(0,a.jsx)("span",{className:"font-semibold",children:"Price per m\xb2: "})," ",(0,a.jsxs)("span",{children:[" ",p(e.sqm_price)]})]}),e.square_meters&&(0,a.jsxs)("p",{className:"flex items-center",children:[(0,a.jsx)(S.A,{className:"h-3.5 w-3.5 mr-2 text-indigo-400"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Total Price: "}),p(e.square_meters*e.sqm_price)]})]})]}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No price information"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm",children:[e.mobile_paths&&(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-gray-50 px-2 py-1 rounded",children:[(0,a.jsx)("span",{children:"Mobile Paths:"}),(0,a.jsx)(A,{className:"text-green-500 w-4 h-4"})]}),e.desktop_paths&&(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-gray-50 px-2 py-1 rounded",children:[(0,a.jsx)("span",{children:"Desktop Paths:"}),(0,a.jsx)(A,{className:"text-green-500 w-4 h-4"})]})]}),(0,a.jsx)(I,{apartment:e,isOpen:i,onClose:()=>{c(!0),setTimeout(()=>{l(!1),c(!1)},500)},buildingId:s,floorId:r})]})},{Axios:F,AxiosError:$,CanceledError:E,isCancel:M,CancelToken:U,VERSION:T,all:G,Cancel:L,isAxiosError:O,spread:K,toFormData:R,AxiosHeaders:V,HttpStatusCode:Q,formToJSON:B,getAdapter:H,mergeConfig:J}=s(51060).A,W=({buildingId:e,floorId:t})=>{let[s,r]=(0,n.useState)(1),[o,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)(null),f=(0,i.jE)(),{data:v,isLoading:y,error:N}=j(e,t,s,15),_=v?.apartments||[],w=v?.pagination||{total:0,page:1,limit:15,totalPages:1,hasNextPage:!1,hasPreviousPage:!1},q=N instanceof $&&N.response?.data?.error==="NO_APARTMENTS_FOUND",S=!y&&(0===_.length||q),A=e=>{x(e),c(!0)};return(0,a.jsxs)("div",{className:"w-full px-10 py-5 pb-16",children:[N&&!q?(0,a.jsx)("div",{className:"text-red-500 my-4",children:"object"==typeof N&&null!==N&&"message"in N?String(N.message):"Error fetching apartments."}):null,y?(0,a.jsx)("div",{className:"flex justify-center my-8",children:"Loading apartments..."}):(0,a.jsx)(a.Fragment,{children:S?(0,a.jsx)(b,{onGenerate:()=>{m(!0)}}):(0,a.jsxs)(a.Fragment,{children:[_.map(s=>(0,a.jsx)("div",{className:"mb-8",children:s.apartments.map(s=>(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(d.$,{className:" bg-indigo-400 cursor-none mb-4",children:["Floor ",s.floor]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.apartments.map(s=>(0,a.jsx)(D,{apartment:s,onUpdate:()=>A(s),buildingId:e,floorId:t},s.flat_id))})]},s.floor))},s.floor_plan_id)),w.totalPages>1&&(0,a.jsx)(p,{currentPage:w.page,totalPages:w.totalPages,onPageChange:e=>{r(e)}})]})}),h&&(0,a.jsx)(P,{apartment:h,isOpen:o,onClose:()=>{c(!1),x(null)},floorId:t,onSuccess:()=>{f.invalidateQueries({queryKey:["apartments",e,t]}),c(!1)}}),(0,a.jsx)(l.lG,{open:u,onOpenChange:m,children:(0,a.jsxs)(l.Cf,{className:"sm:max-w-md",children:[(0,a.jsx)(l.c7,{children:(0,a.jsx)(l.L3,{children:"Generate Apartments"})}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(g,{buildingId:e,floorPlanId:t,floorPlanName:`Floor Plan ${t}`,onSuccess:()=>{m(!1),f.invalidateQueries({queryKey:["apartments",e,t]})}})})]})})]})};function X(){let e=(0,r.useParams)(),t=e.buildingID,s=e.floorID;return(0,a.jsx)(W,{buildingId:t,floorId:s})}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[825,945,701,131,319,336,410],()=>s(47825));module.exports=a})();