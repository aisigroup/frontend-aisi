(()=>{var e={};e.id=713,e.ids=[713],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},41444:(e,r,t)=>{Promise.resolve().then(t.bind(t,41497))},41497:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\New project\\\\property-frontend\\\\src\\\\app\\\\[locale]\\\\aisi-goderdzi\\\\[...id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\aisi-goderdzi\\[...id]\\page.tsx","default")},42012:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>P});var s=t(60687),a=t(43210),i=t.n(a),o=t(29494),n=t(95884),l=t(41728),d=t(34569),u=t(16189);let p={desktop:{width:1440,height:671},mobile:{width:1856,height:3820}},c={desktop:{width:1440,height:671},mobile:{width:1856,height:3820}};var m=t(20051),f=t(59879),g=t(22356),h=t(23954),x=t(41862);let b=i().memo(d.f),v=i().memo(f.W,(e,r)=>e.floorRangeStart===r.floorRangeStart&&e.floorRangeEnd===r.floorRangeEnd&&e.buildingId===r.buildingId&&e.floorPlanId===r.floorPlanId&&e.disabled===r.disabled);v.displayName="MemoizedFloorSelector";let y=i().memo(({selectedFloorPlan:e,floorPlanId:r,originalDimensions:t,maxDimensions:i,isMobile:o,apartmentAreas:n,hoveredApartment:l,setHoveredApartment:d,handleApartmentClick:u,currentFloor:p})=>{let c=(0,a.useMemo)(()=>{if(!e)return"/placeholder.svg";let r=o?e.mobile_image:e.desktop_image;return`https://api.aisigroup.ge/${r}`},[e,o]),f=(0,a.useCallback)(({scaleFactorX:e,scaleFactorY:r})=>(0,s.jsx)(s.Fragment,{children:n.map(t=>(0,s.jsx)(b,{flatId:t.flatId,flatNumber:t.flatNumber,status:t.status,coords:t.coords,hoveredApartment:l,setHoveredApartment:d,onApartmentClick:u,scaleFactorX:e,scaleFactorY:r},`${t.flatId}-${p}`))}),[n,l,u,p]);return(0,s.jsx)("div",{className:"flex-1 min-h-0 relative",children:(0,s.jsx)("div",{className:"w-full h-full",children:(0,s.jsx)(m.w,{imageSrc:c,altText:`${e?.name||"Building"} - Floor ${p} Plan`,originalDimensions:t,maxDimensions:i,isMobile:o,priority:!0,children:f},`plan-${r}`)})})},(e,r)=>e.floorPlanId===r.floorPlanId&&e.isMobile===r.isMobile&&e.hoveredApartment===r.hoveredApartment&&JSON.stringify(e.apartmentAreas)===JSON.stringify(r.apartmentAreas)&&e.selectedFloorPlan?.id===r.selectedFloorPlan?.id);function P(){let[e,r]=(0,a.useState)(null),[t,i]=(0,a.useState)(void 0),[d,m]=(0,a.useState)(!1),f=(0,u.useParams)(),b=(0,a.useRef)(new Map),{currentFloor:P,buildingId:j,floorPlanId:_,setBuildingContext:w}=(0,h.l)(),{buildingId:q,floorPlanId:N}=(0,a.useCallback)(()=>{let e=Array.isArray(f.id)?f.id:[f.id];return{buildingId:e[0]||"",floorPlanId:e[1]||""}},[f.id])(),I=!!(q&&N),{data:A=[],isLoading:k}=(0,o.I)({queryKey:["floorPlanList",q],queryFn:async()=>q?await n.$.getList(q):[],staleTime:3e5,gcTime:18e5,retry:2,enabled:!!q}),S=(0,a.useMemo)(()=>A?.length&&N&&A.find(e=>e.id.toString()===N)||null,[A,N]),F=(0,a.useMemo)(()=>({floorRangeStart:S?.floor_range_start,floorRangeEnd:S?.floor_range_end}),[S?.floor_range_start,S?.floor_range_end]),{data:$}=(0,o.I)({queryKey:["apartments",q,N,P],queryFn:async()=>{if(!I||!P)return null;let e=`${q}-${N}-${P}`;if(b.current.has(e))return b.current.get(e);let r=await n.$.getApartments(q,N,P.toString());return b.current.set(e,r),r},staleTime:6e5,gcTime:18e5,retry:2,enabled:I&&!!P,select:e=>e||{apartments:[]}}),{isMobile:C,apartmentAreas:M}=(0,l.c)($),z=(0,a.useCallback)(e=>{r(e)},[]),R=(0,a.useCallback)((e,r)=>{let t=$?.apartments?.[0]?.apartments?.[0];if(!t){console.warn("No apartment info found for the current floor plan.");return}let s=t.apartments?.find(e=>Number(e.flat_number)===r);s&&(i({id:Number.parseInt(s.flat_id),number:s.flat_number,area:Number.parseFloat(s.square_meters)||0,status:s.status,floor:t.floor||P,price:s.sqm_price?Number.parseFloat(s.sqm_price)*Number.parseFloat(s.square_meters):void 0,images:s.images||[]}),m(!0))},[$,P]),D=(0,a.useMemo)(()=>({selectedFloorPlan:S,floorPlanId:N,originalDimensions:p,maxDimensions:c,isMobile:C,apartmentAreas:M,hoveredApartment:e,setHoveredApartment:z,handleApartmentClick:R,currentFloor:P}),[S,N,C,M,e,z,R,P]);return k&&!A.length?(0,s.jsx)("main",{className:"w-full pt-24 md:pt-28 pb-10 min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm p-6 rounded-lg border border-gray-200 flex flex-col items-center",children:[(0,s.jsx)(x.A,{className:"h-10 w-10 text-indigo-600 animate-spin mb-2"}),(0,s.jsx)("p",{className:"text-gray-900",children:"Loading building data..."})]})}):(0,s.jsx)("main",{className:`w-full pt-24 md:pt-28 pb-10 min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 ${C?"min-h-screen overflow-y-auto":"h-auto"}`,children:(0,s.jsxs)("div",{className:`flex flex-col ${C?"":"h-full"}`,children:[(0,s.jsx)("div",{className:"flex w-full justify-center items-center",children:(0,s.jsx)(v,{buildingId:q,floorPlanId:N,...F})}),(0,s.jsx)(y,{...D}),(0,s.jsx)(g.S,{isOpen:d,onClose:()=>m(!1),apartment:t||null})]})})}y.displayName="FloorPlanImageSection"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71300:(e,r,t)=>{Promise.resolve().then(t.bind(t,42012))},74075:e=>{"use strict";e.exports=require("zlib")},75325:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>u,routeModule:()=>c,tree:()=>d});var s=t(65239),a=t(48088),i=t(88170),o=t.n(i),n=t(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d={children:["",{children:["[locale]",{children:["aisi-goderdzi",{children:["[...id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,41497)),"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\aisi-goderdzi\\[...id]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,42330))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(t.bind(t,95450))).default(e)],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,11434)),"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\aisi-goderdzi\\[...id]\\page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},c=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/[locale]/aisi-goderdzi/[...id]/page",pathname:"/[locale]/aisi-goderdzi/[...id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,825,137,701,814,792,368,418],()=>t(75325));module.exports=s})();