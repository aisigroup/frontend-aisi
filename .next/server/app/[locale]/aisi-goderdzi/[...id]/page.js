(()=>{var e={};e.id=713,e.ids=[713],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},41444:(e,r,t)=>{Promise.resolve().then(t.bind(t,41497))},41497:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\New project\\\\property-frontend\\\\src\\\\app\\\\[locale]\\\\aisi-goderdzi\\\\[...id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\aisi-goderdzi\\[...id]\\page.tsx","default")},42012:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>q});var s=t(60687),a=t(43210),i=t.n(a),o=t(29494),n=t(95884),l=t(41728),d=t(34569),c=t(16189);let p={desktop:{width:1440,height:671},mobile:{width:1856,height:3820}},u={desktop:{width:1440,height:671},mobile:{width:1856,height:3820}};var m=t(20051),x=t(47033),h=t(29523),f=t(28621),g=t(51870),b=t(59879);let j=i().memo(m.w),v=i().memo(d.f),y=({message:e="Loading..."})=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:e})]});function q(){let[e,r]=(0,a.useState)(null),[t,i]=(0,a.useState)(void 0),[d,m]=(0,a.useState)(!1),q=(0,c.useParams)(),_=(0,c.useRouter)(),{buildingId:w,floorPlanId:P,floorId:N}=(0,a.useCallback)(()=>{let e=Array.isArray(q.id)?q.id:[q.id];return{buildingId:e[0]||"",floorPlanId:e[1]||"",floorId:e[2]||""}},[q.id])(),k=!!(w&&P&&N),{data:z=[],isLoading:C,error:I}=(0,o.I)({queryKey:["floorPlanList",w],queryFn:async()=>{if(!w)return[];try{return await n.$.getList(w)}catch(e){return console.error("Error fetching floor plans:",e),[]}},staleTime:3e5,gcTime:18e5,retry:2,enabled:!!w}),$=(0,a.useMemo)(()=>z&&0!==z.length&&z.find(e=>e.id.toString()===P)||null,[z,P]),{data:A,isLoading:F,error:D}=(0,o.I)({queryKey:["apartments",w,P,N],queryFn:async()=>{if(!k)throw Error("Missing required IDs");return n.$.getApartments(w,P,N)},staleTime:3e5,gcTime:18e5,retry:2,enabled:k}),E=C||F,L=I||D||!E&&(!z.length||!$),{isMobile:M,apartmentAreas:S}=(0,l.c)(A),R=(0,a.useCallback)((e,r)=>{let t=A?.apartments?.[0]?.apartments?.[0]?.apartments?.find(e=>Number(e.flat_number)===r);t&&(i({id:parseInt(t.flat_id),number:t.flat_number,area:parseFloat(t.square_meters)||0,status:t.status,floor:A?.apartments?.[0]?.apartments?.[0]?.floor||1,price:t.sqm_price?parseFloat(t.sqm_price)*parseFloat(t.square_meters):void 0,images:t.images||[]}),m(!0))},[A]),T=(0,a.useCallback)(()=>{_.back()},[_]),G=(0,a.useMemo)(()=>$?M?`https://api.aisigroup.ge${$.mobile_image}`:`https://api.aisigroup.ge${$.desktop_image}`:"/placeholder.svg",[$,M]),B=(0,a.useCallback)(({scaleFactorX:t,scaleFactorY:a})=>(0,s.jsx)(s.Fragment,{children:S.map(i=>(0,s.jsx)(v,{flatId:i.flatId,flatNumber:i.flatNumber,status:i.status,coords:i.coords,hoveredApartment:e,setHoveredApartment:r,onApartmentClick:R,scaleFactorX:t,scaleFactorY:a},i.flatId))}),[S,e,R]);return(0,s.jsx)("main",{className:`relative ${M?"min-h-screen":"h-screen"} w-full bg-gray-50 ${M?"overflow-y-auto":"overflow-hidden"} z-50`,children:E?(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:(0,s.jsx)(y,{message:"Loading floor plan data..."})}):L?(0,s.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-700 mb-2",children:"Unable to Load Data"}),(0,s.jsx)("p",{className:"text-gray-700 mb-4",children:"We couldn't load the floor plan data. Please try again later or contact support."}),(0,s.jsx)(h.$,{onClick:T,className:"bg-red-600 hover:bg-red-700 text-white",children:"Go Back"})]})}):(0,s.jsxs)("div",{className:`flex flex-col ${M?"":"h-full"}`,children:[!E&&(0,s.jsxs)("div",{className:"bg-white flex justify-start items-center rounded-xl shadow-lg py-5 px-4 md:px-10",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsxs)(h.$,{variant:"outline",size:"sm",onClick:T,className:"flex items-center gap-1",children:[(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{className:"hidden md:inline",children:"Back"})]})}),(0,s.jsx)("div",{className:"mx-4 flex items-center gap-3",children:(0,s.jsx)(b.W,{currentFloor:parseInt(N),floorRangeStart:$?.floor_range_start,floorRangeEnd:$?.floor_range_end,buildingId:w,floorPlanId:P,route:"aisi-goderdzi"})}),(0,s.jsx)(f.A,{})]}),(0,s.jsx)("div",{className:`${M?"mt-2":"flex-1 overflow-hidden min-h-0"}`,children:(0,s.jsx)(j,{imageSrc:G||"/placeholder.svg",altText:`${$?.name||"Building"} - Floor ${N} Plan`,originalDimensions:p,maxDimensions:u,isMobile:M,priority:!0,children:B},`floor-${N}-plan-${P}`)}),(0,s.jsx)(g.S,{isOpen:d,onClose:()=>{m(!1)},apartment:t||null})]})})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71300:(e,r,t)=>{Promise.resolve().then(t.bind(t,42012))},74075:e=>{"use strict";e.exports=require("zlib")},75325:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=t(65239),a=t(48088),i=t(88170),o=t.n(i),n=t(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d={children:["",{children:["[locale]",{children:["aisi-goderdzi",{children:["[...id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,41497)),"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\aisi-goderdzi\\[...id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11434)),"D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\Projects\\New project\\property-frontend\\src\\app\\[locale]\\aisi-goderdzi\\[...id]\\page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/[locale]/aisi-goderdzi/[...id]/page",pathname:"/[locale]/aisi-goderdzi/[...id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[825,945,701,319,336,996],()=>t(75325));module.exports=s})();