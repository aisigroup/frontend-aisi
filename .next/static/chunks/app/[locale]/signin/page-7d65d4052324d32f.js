(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[412],{718:(e,t,r)=>{Promise.resolve().then(r.bind(r,8430))},768:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});let a=r(3464).A.create({baseURL:"https://api.aisigroup.ge/api",withCredentials:!0,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t,r,a,s;return console.error("❌ API Error:",null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status,null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data),((null===(a=e.response)||void 0===a?void 0:a.status)===401||(null===(s=e.response)||void 0===s?void 0:s.status)===403)&&(localStorage.removeItem("token"),window.location.pathname.includes("/signin")||(window.location.href="/signin")),Promise.reject(e)})},8430:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),s=r(2115),o=r(5695),l=r(5594),n=r(9870);let i=l.z.object({email:l.z.string().email("Invalid email address"),password:l.z.string().min(6,"Password must be at least 6 characters")});function d(){let e=(0,o.useRouter)(),[t,r]=(0,s.useState)({email:"",password:""}),[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(!1),m=e=>{let{name:t,value:a}=e.target;r(e=>({...e,[t]:a})),l[t]&&d(e=>({...e,[t]:void 0}))},p=async r=>{var a,s,o,l;r.preventDefault(),u(!0),d({});try{let r=i.safeParse(t);if(!r.success){let e=r.error.flatten().fieldErrors;d({email:null===(a=e.email)||void 0===a?void 0:a[0],password:null===(s=e.password)||void 0===s?void 0:s[0]}),u(!1);return}(await n.R.login(t)).data&&e.push("/admin")}catch(e){d({general:(null===(l=e.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.message)||"An unexpected error occurred"})}finally{u(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Sign In"}),l.general&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l.general}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:t.email,onChange:m,className:"mt-1 block w-full rounded-md border ".concat(l.email?"border-red-500":"border-gray-300"," shadow-sm py-2 px-3"),placeholder:"Enter your email"}),l.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:l.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsx)("input",{type:"password",id:"password",name:"password",value:t.password,onChange:m,className:"mt-1 block w-full rounded-md border ".concat(l.password?"border-red-500":"border-gray-300"," shadow-sm py-2 px-3"),placeholder:"Enter your password"}),l.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:l.password})]}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"w-full py-2 px-4 rounded-md text-white font-semibold ".concat(c?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"),children:c?"Signing In...":"Sign In"})]})]})})}},9870:(e,t,r)=>{"use strict";r.d(t,{R:()=>s});var a=r(768);let s={login:async e=>{try{let t=await a.S.post("/signin",e);return t.data.token&&localStorage.setItem("token",t.data.token),t.data}catch(e){throw console.error("❌ Login failed:",e),e}},signup:async e=>{try{return(await a.S.post("/signup",e)).data}catch(e){throw console.error("❌ Signup failed:",e),e}},signout:async()=>{try{let e=await a.S.post("/signout");return localStorage.removeItem("token"),e.data}catch(e){throw console.error("❌ Signout error:",e),localStorage.removeItem("token"),e}},checkAuthStatus:async()=>{try{return(await a.S.get("/status")).data}catch(e){throw console.error("❌ Auth status check failed:",e),e}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[794,594,441,684,358],()=>t(718)),_N_E=e.O()}]);